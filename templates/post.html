{% extends "base.html" %}
{% block title %}Note Created{% endblock %}
{% block head %}
    <script type="application/javascript" src="{{ url_for('index')
    }}static/js/qrcode-min.js"></script>
    <script type="application/javascript">
        window.onload = function() {
            var secret = document.getElementById('note');
            secret.focus ();
            secret.select ();
        }
    </script>
{% endblock %}
{% block content %}
    <p>Copy this link and send it to your recipient. Or, <a href="{{
    url_for('fetch_url', random_url=random, _external=True) }}">you can destroy
    it now</a>.</p>
    <p>Your private url:<br/>
    <input id="note" size="85" readonly="readonly" type="text" value="{{
    url_for('fetch_url', random_url=random, _external=True) }}"/></p>
    {% if passphrase %}
    <p>Your passphrase:<br/>
    <input size="25" readonly="readonly" type="text" value="{{ passphrase
    }}"/></p>
    {% endif %}
    {% if duress %}
    <p>Your duress key:<br/>
    <input size="25" readonly="readonly" type="text" value="{{ duress }}"/></p>
    {% endif %}
    <p>Alternatively, you can scan this QR code, and "share" it using your
    mobile device via text message, email, etc. <strong>NOTE:</strong> <a
    href='https://f-droid.org/repository/browse/?fdid=com.google.zxing.client.android'>ZXing
    Barcode</a> users: disable "Retrieve more info" from the settings, otherwise
    your recipient will <strong>NOT</strong> be able to view the post.</p>
    <a id="show_hide" href="#" onclick="toggle('qrcode');">Show QR Code</a>
    <div id="qrcode" style="display: none;"></div>
    <script type="text/javascript">
        new QRCode(document.getElementById("qrcode"), { text: "{{
        url_for('fetch_url', random_url=random, _external=True) }}",
        correctLevel: QRCode.CorrectLevel.L });
        function toggle(id) {
            var state = document.getElementById(id).style.display;
            var text = document.getElementById("show_hide");
            if (state == 'block') {
                document.getElementById(id).style.display = 'none';
                text.innerHTML = "Show QR Code";
            } else {
                document.getElementById(id).style.display = 'block';
                text.innerHTML = "Hide QR Code";
            }
        } 
    </script>
{% endblock %}
